# Ludo Board Layout - Safe Squares Map

## Visual Board Layout (52 Track Squares)

```
                    TOP
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   [RED HOME QUADRANT]   ‚îÇ
        ‚îÇ        üè† üè†            ‚îÇ
        ‚îÇ        üè† üè†            ‚îÇ
        ‚îú‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚î§
        ‚îÇ 8‚îÇ 9‚îÇ10‚îÇ11‚îÇ12‚îÇ‚ñ∂Ô∏é‚îÇ 0‚îÇ 1‚îÇ 2‚îÇ
        ‚îú‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î§ ‚ñ∂Ô∏é‚îú‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚î§
        ‚îÇ 7‚îÇ‚ñ∂Ô∏é‚îÇ‚ñ∂Ô∏é‚îÇ‚ñ∂Ô∏é‚îÇ‚ñ∂Ô∏é‚îÇ‚ñ∂Ô∏é‚îÇ‚ñ∂Ô∏é‚îÇ 3‚îÇ 4‚îÇ
LEFT    ‚îú‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î§    RIGHT
        ‚îÇ 6‚îÇ   ‚≠ê CENTER ‚≠ê  ‚îÇ 5‚îÇ13‚îÇ
        ‚îú‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚î§
        ‚îÇ51‚îÇ‚óÄÔ∏é‚îÇ‚óÄÔ∏é‚îÇ‚óÄÔ∏é‚îÇ‚óÄÔ∏é‚îÇ‚óÄÔ∏é‚îÇ‚óÄÔ∏é‚îÇ14‚îÇ15‚îÇ
        ‚îú‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îº‚î§
        ‚îÇ50‚îÇ49‚îÇ48‚îÇ47‚îÇ46‚îÇ‚óÄÔ∏é‚îÇ45‚îÇ16‚îÇ17‚îÇ
        ‚îî‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îò
        ‚îÇ  [YELLOW HOME]  [GREEN] ‚îÇ
        ‚îÇ    üè† üè†       üè† üè†   ‚îÇ
        ‚îÇ    üè† üè†       üè† üè†   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  BOTTOM
```

## Safe Square Positions (‚≠ê)

### Track Indices with Safe Squares Marked

```
Index 0-12:   ‚≠ê 1  2  3  4  5  6  7  ‚≠ê 9 10 11 12
              0                      8

Index 13-25: ‚≠ê 14 15 16 17 18 19 20 ‚≠ê 22 23 24 25
             13                      21

Index 26-38: ‚≠ê 27 28 29 30 31 32 33 ‚≠ê 35 36 37 38
             26                      34

Index 39-51: ‚≠ê 40 41 42 43 44 45 46 ‚≠ê 48 49 50 51
             39                      47
```

## Safe Square Details

| Index | Position | Description |
|-------|----------|-------------|
| **0** | ‚≠ê Top-Right | Red player starting square (shared) |
| **8** | ‚≠ê Top-Left | After first corner turn |
| **13** | ‚≠ê Right-Top | Green player starting square |
| **21** | ‚≠ê Right-Bottom | After second corner turn |
| **26** | ‚≠ê Bottom-Right | Yellow player starting square |
| **34** | ‚≠ê Bottom-Left | After third corner turn |
| **39** | ‚≠ê Left-Bottom | Blue player starting square |
| **47** | ‚≠ê Left-Top | After fourth corner turn |

## Player Paths

### üî¥ Red (Player 0)
- **Start:** Index 0 ‚≠ê (safe)
- **Home Entry:** Index 50 ‚Üí enters red home lane
- **Path:** 0‚Üí1‚Üí2‚Üí...‚Üí50‚Üí51‚Üí[home]

### üü¢ Green (Player 1)
- **Start:** Index 13 ‚≠ê (safe)
- **Home Entry:** Index 11 ‚Üí enters green home lane
- **Path:** 13‚Üí14‚Üí15‚Üí...‚Üí11‚Üí12‚Üí[home]

### üü° Yellow (Player 2)
- **Start:** Index 26 ‚≠ê (safe)
- **Home Entry:** Index 24 ‚Üí enters yellow home lane
- **Path:** 26‚Üí27‚Üí28‚Üí...‚Üí24‚Üí25‚Üí[home]

### üîµ Blue (Player 3)
- **Start:** Index 39 ‚≠ê (safe)
- **Home Entry:** Index 37 ‚Üí enters blue home lane
- **Path:** 39‚Üí40‚Üí41‚Üí...‚Üí37‚Üí38‚Üí[home]

## Track Direction

```
          ‚Üì  (Red enters)
      ‚îå‚îÄ‚îÄ‚îÄ‚≠ê‚îÄ‚Üí‚Üí‚Üí‚Üí‚Üí‚Üí‚Üí‚Üí‚≠ê‚îÄ‚îê
      ‚Üë                ‚Üì
      ‚≠ê                ‚≠ê (Green enters)
      ‚Üë                ‚Üì
      ‚Üë   ‚≠ê HOME ‚≠ê   ‚Üì
      ‚Üë                ‚Üì
      ‚≠ê                ‚≠ê
      ‚Üë                ‚Üì
(Blue)‚≠ê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚≠ê‚Üê‚îÄ‚îÄ‚îò
      ‚Üë         (Yellow enters)
```

## Home Stretch Lanes

Each player has a private **home lane** (6 squares):

```
Red Home Lane:    52 ‚Üí 53 ‚Üí 54 ‚Üí 55 ‚Üí 56 ‚Üí 57 ‚Üí üè†
Green Home Lane:  52 ‚Üí 53 ‚Üí 54 ‚Üí 55 ‚Üí 56 ‚Üí 57 ‚Üí üè†
Yellow Home Lane: 52 ‚Üí 53 ‚Üí 54 ‚Üí 55 ‚Üí 56 ‚Üí 57 ‚Üí üè†
Blue Home Lane:   52 ‚Üí 53 ‚Üí 54 ‚Üí 55 ‚Üí 56 ‚Üí 57 ‚Üí üè†
```

**Note:** Index 52-57 are relative to each player's home lane (not global track).

## Base Positions

Each player starts with **4 tokens in base**:

```
üî¥ Red Base:    Top-Left quadrant (4 circles)
üü¢ Green Base:  Top-Right quadrant (4 circles)
üü° Yellow Base: Bottom-Left quadrant (4 circles)
üîµ Blue Base:   Bottom-Right quadrant (4 circles)
```

## PixiJS Coordinate Mapping

The frontend (`BoardCanvas.jsx`) maps track indices to pixel positions:

```javascript
// Track coordinates generated by buildTrack()
const trackPts = buildTrack(); // Returns array[52] of {x, y}

// Example positions (640x640 canvas):
trackPts[0]  ‚Üí {x: 480, y: 160}  // Top-right (Red start) ‚≠ê
trackPts[8]  ‚Üí {x: 160, y: 160}  // Top-left ‚≠ê
trackPts[13] ‚Üí {x: 480, y: 320}  // Right-top (Green start) ‚≠ê
trackPts[21] ‚Üí {x: 480, y: 480}  // Right-bottom ‚≠ê
trackPts[26] ‚Üí {x: 320, y: 480}  // Bottom-center (Yellow) ‚≠ê
trackPts[34] ‚Üí {x: 160, y: 480}  // Bottom-left ‚≠ê
trackPts[39] ‚Üí {x: 160, y: 320}  // Left-center (Blue start) ‚≠ê
trackPts[47] ‚Üí {x: 160, y: 160}  // Left-top ‚≠ê
```

## Safe Square Strategy Tips

### When to Use Safe Squares
1. **Early Game:** Rush to starting square (index 0) with roll of 6
2. **Mid Game:** Plan moves to land on safe squares (8, 21, 34, 47)
3. **Late Game:** Use safe squares as checkpoints before home stretch

### Safe vs. Unsafe Squares
```
‚úÖ SAFE (‚≠ê): Cannot be captured, multiple tokens allowed
‚ùå UNSAFE:   Can be captured, vulnerable to opponents
```

### Blocking Strategy
- Safe squares **do not** form blocks (opponents can pass)
- Normal squares: 2+ same-player tokens = block

## Complete Track Map with Safe Squares

```
Red Path (indices relative to Red's start):
0‚≠ê ‚Üí 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 ‚Üí 5 ‚Üí 6 ‚Üí 7 ‚Üí 8‚≠ê ‚Üí 9 ‚Üí 10 ‚Üí 11 ‚Üí 12 ‚Üí 
13‚≠ê ‚Üí 14 ‚Üí 15 ‚Üí 16 ‚Üí 17 ‚Üí 18 ‚Üí 19 ‚Üí 20 ‚Üí 21‚≠ê ‚Üí 22 ‚Üí 23 ‚Üí 24 ‚Üí 25 ‚Üí 
26‚≠ê ‚Üí 27 ‚Üí 28 ‚Üí 29 ‚Üí 30 ‚Üí 31 ‚Üí 32 ‚Üí 33 ‚Üí 34‚≠ê ‚Üí 35 ‚Üí 36 ‚Üí 37 ‚Üí 38 ‚Üí 
39‚≠ê ‚Üí 40 ‚Üí 41 ‚Üí 42 ‚Üí 43 ‚Üí 44 ‚Üí 45 ‚Üí 46 ‚Üí 47‚≠ê ‚Üí 48 ‚Üí 49 ‚Üí 50 ‚Üí 51 ‚Üí 
[HOME LANE: 52 ‚Üí 53 ‚Üí 54 ‚Üí 55 ‚Üí 56 ‚Üí 57 ‚Üí üè†]
```

## Board Dimensions (Frontend)

```javascript
// PixiJS canvas size
const size = 640; // pixels

// Board geometry
const boardSize = size - 80;  // 560px (with margins)
const quadrantW = boardSize / 2; // 280px
const quadrantH = boardSize / 2; // 280px

// Track path
const trackRadius = boardSize * 0.36; // ~200px loop radius
const trackWidth = 40px; // width of track path

// Star size
const starRadius = 12px;
const starGlowRadius = 18px;
```

## Code Reference

### Backend Validation
```javascript
// services/validator.js
const BOARD_SIZE = 52;
const HOME_LENGTH = 6;
const SAFE_SQUARES = [0, 8, 13, 21, 26, 34, 39, 47];
```

### Frontend Constants
```javascript
// frontend/src/constants/boardConfig.js
export const SAFE_SQUARES = [0, 8, 13, 21, 26, 34, 39, 47];
export const BOARD_SIZE = 52;
export const HOME_LENGTH = 6;
```

### Rendering
```javascript
// frontend/src/board/BoardCanvas.jsx
SAFE_SQUARES.forEach((idx) => {
  const pos = posFor.trackCoord(idx);
  // Draw star at pos.x, pos.y
});
```

---

## Legend

| Symbol | Meaning |
|--------|---------|
| ‚≠ê | Safe square (cannot be captured) |
| üè† | Home/Base area |
| ‚ñ∂Ô∏é | Home lane direction (to center) |
| ‚Üí | Track direction (clockwise) |
| 0-51 | Global track indices |
| 52-57 | Home lane indices (per player) |

---

**Use this map to:**
- Plan token movements strategically
- Identify safe positions during gameplay
- Debug board rendering issues
- Understand the relationship between frontend positions and backend indices
